#!/bin/bash

. panel_colors


_subtractthemename(){
	local trunc=$(($themelength-$themetargetlength))
	echo ${theme:$trunc}
}

_addthemename(){
	local add=$(($themetargetlength-$themelength))
	result=$theme
	for (( c=1; c<=$add; c++ ))
	do  
		result+=" "
	done
	echo "$result"
}

_makethemename16(){
	themetargetlength=16
	theme="$(colors-get-base16-name)"
	# replace base16 with b 
	theme="${theme/base16-/}"
	themelength="${#theme}"

	[ $themelength -gt $themetargetlength ] && theme="$(_subtractthemename)"
	[ $themelength -lt $themetargetlength ] && theme="$(_addthemename)"
	echo "${theme}"
}

_getchar(){
	echo -n " ${_name:$1:1} "
}

_format(){
	echo -n "%{F$1}%{B$2}$3%{B-}%{F-}"
}

_mycolors(){
	_name="$(_makethemename16)"

	local cols
	cols+="$(_format $color15 $color0 "$(_getchar 0)")"
	for i in {1..15} ; do
		_acolorref="color$i"
		cols+="$(_format $color0 "${!_acolorref}"  "$(_getchar $i)")"
	done
	echo "${cols}"
}

echo "O$(_mycolors)"
