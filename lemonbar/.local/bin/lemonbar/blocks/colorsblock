#!/bin/bash

. panel_colors


_smaller(){
	local trunc=$((namelength-$requiredlength))
	echo ${name:$trunc}
}

_filler(){
	local res=$name
	local fill=$(($requiredlength-$namelength))
	local isodd=$(($fill%2))
	if [ $isodd -eq 1 ] ; then
		res=" $res"
		fill=$(($fill-1))
	fi

	local centeredfill=$(($fill/2))
	for (( c=1; c<=$centeredfill; c++ ))
	do  
		res=" $res "
	done
	echo "$res"
}

_name16(){
	requiredlength=16
	name="$(colors-get-base16-name)"
	# replace base16 with b 
	name="${name/base16-/}"
	namelength="${#name}"

	[ $namelength -gt $requiredlength ] && name="$(_smaller)"
	[ $namelength -lt $requiredlength ] && name="$(_filler)"
	echo "${name}"
}

_getchar(){
	echo -n " ${_name:$1:1} "
}

_format(){
	echo -n "%{F$1}%{B$2}$3%{B-}%{F-}"
}

_mycolors(){
	_name="$(_name16)"

	local cols
	cols+="$(_format $color15 $color0 "$(_getchar 0)")"
	for i in {1..15} ; do
		_acolorref="color$i"
		cols+="$(_format $color0 "${!_acolorref}"  "$(_getchar $i)")"
	done
	echo "${cols}"
}

echo "O$(_mycolors)"
