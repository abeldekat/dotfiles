#!/bin/bash

_dmenu() {
	color5=$(_xrdb "color5")
	background=$(_xrdb "background")
	foreground=$(_xrdb "foreground")
	activemenu=$(<$theactivename)
	dmenu -p "Select theme ($activemenu)" -nb "${background:-'#000000'}" -nf "${foreground:-'#ffffff'}" \
	-sb "${color5:-'#bb6688'}" -sf "${background:-'#000000'}" -i -l 60
	#-sb "${color5:-'#bb6688'}" -sf "${background:-'#000000'}" -fn "${my_custom_ui_font:-'DejaVu Sans-10'}"
}

_xrdb(){
	echo $(xrdb -query | grep $1 | cut -d: -f2 | sed s/\\s//)
}

_name(){
	echo $(basename --suffix=.Xcolors $file)
}

_names(){
	for file in $thecolors/xcolors/*.Xcolors
	do
		_name $file
	done
}

thecolors="$HOME/.local/share/colors/"
theactivename="$thecolors/active-theme.name"
selection="$(_names | sort -z |  _dmenu)"
if [ "$?" = 0 ]; then
	theme $selection
fi
