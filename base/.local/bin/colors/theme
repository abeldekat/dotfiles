#!/bin/bash

thecolors="$HOME/.local/share/colors/"
theactivexres="$thecolors/active-theme.Xcolors"
theactivename="$thecolors/active-theme.name"

thetheme=$(basename --suffix=.Xcolors $1)
thefile=$thecolors/xcolors/$thetheme.Xcolors

_change(){
	if [ -f $thefile ] ; then 
		echo $thetheme
		cp $thecolors/xcolors/$thetheme.Xcolors $theactivexres
		echo $thetheme > $theactivename
	else 
		echo "Not a valid theme: $thetheme"
		exit 1
	fi
}

_activate(){
	echo "Merging xresources"
	xrdb -remove $HOME/.Xresources && xrdb -merge $HOME/.Xresources
	echo "Restarting bspwm"
	bspc wm --restart
}

_apply(){
	_change	
	_activate
}

_apply
